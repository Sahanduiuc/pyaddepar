version: '3.4'
services:
  pyaddepar:
     build:
       context: .
       dockerfile: Dockerfile
       target: builder
     volumes:
        # change the folder on the left to direct your logs to...
        - ./pyaddepar:/pyaddepar/pyaddepar:ro
        - ./data:/data

     command: /bin/bash

     working_dir: /pyaddepar

     env_file:
      - .config

  jupyter:
    build:
      context: .
      dockerfile: Dockerfile-Jupyter

    #extra_hosts:
    #  - "bloomberg:192.168.100.125"

    volumes:
      - ./pyaddepar:/home/${NB_USER}/work/pyaddepar:ro
      - ./work:/home/${NB_USER}/work
    #working_dir: /home/${NB_USER}/work

    env_file:
      - .config
    ports:
      - ${PORT}:8888